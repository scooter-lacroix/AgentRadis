# 🌟 AgentRadis - あなたのAIコンパニオン 🤖

[![ライセンス: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

AgentRadisは、コンテキスト認識を維持しながら様々なツールと対話するように設計された拡張可能なAIエージェントシステムです。ツール呼び出し機能を備えたAI駆動アプリケーションを構築するための柔軟なフレームワークを提供し、美しく直感的なインターフェースにカプセル化されています。✨

<p align="center">
  <img src="docs/images/banner.txt" alt="AgentRadis バナー" width="800"/>
</p>

## ✨ 機能

- **🔧 ツール統合**: ファイル保存、ウェブ検索、コード実行、文字列操作などの様々なツールをシームレスに統合
- **🖥️ 複数のインターフェース**: ウェブUI、コマンドライン、またはAPIを通じてアクセス
- **🧩 柔軟なフレームワーク**: 特定のツール機能を持つカスタムエージェントを構築
- **🧠 コンテキスト認識**: 会話履歴とツールの状態を維持
- **🛡️ エラー処理**: 情報豊富なフィードバックによる堅牢なエラー処理
- **🚀 MCPサーバーサポート**: 拡張機能のためのModel Context Protocol (MCP)サーバーのインストールと使用
- **🎨 美しいUI**: 強化されたASCIIバナー、フォーマットされた出力、ユーザーフレンドリーな表示
- **🔄 リアルタイム更新**: ライブ進捗追跡とステータス更新
- **📝 スマートプランニング**: インテリジェントなタスク計画と実行
- **🗣️ 音声インタラクション**: 高度な音声認識と合成機能
- **🔍 堅牢なウェブ検索**: 包括的な結果を持つマルチエンジン検索
- **📄 テキスト操作**: 強力な文字列編集と置換機能
- **💻 コード実行**: 安全で隔離されたPythonコード実行

## 🏗️ 革命的なアーキテクチャ: 魔法の背後にある頭脳

AgentRadisは単なる別のAIツールではなく、比類のない多様性とパワーのために一から構築された**完全な認知エコシステム**です。最先端のAIと革新的なエンジニアリングを組み合わせた最先端のアーキテクチャにより、魔法のような体験を生み出します。

<p align="center">
  <img src="docs/images/architecture.txt" alt="AgentRadis アーキテクチャ" width="700"/>
</p>

### 🧠 四層インテリジェンスアーキテクチャ

- **🌟 優れた適応型エージェントレイヤー**
  - **Radisエージェント**: 最高傑作—事実上どんなタスクにも適応する高度な推論能力を持つ当社の旗艦汎用エージェント
  - **ToolCallエージェント**: 比類のない精度で複雑なツールチェーンを実行する特化型パワーハウス
  - **Planningエージェント**: 複雑な問題を完璧に調整されたアクションプランに分解する戦略的マスターマインド
  - 各エージェントは、進行中のタスクの完全な認識を維持する当社独自の**Contextual Memory System™**を特徴としています

- **🛠️ エンタープライズグレードのツールレイヤー** 
  - 35以上の特化したツールが結合力のあるエコシステムにシームレスに統合
  - モジュラー設計により、摩擦ゼロで無限の拡張性を実現
  - リアルタイムツール発見と自律的ツール取得機能
  - 組み込みの自動エラー処理と回復プロトコル

- **🔌 超高速APIレイヤー**
  - ミリ秒レベルの応答時間を実現する産業強度のFastAPIを基盤に構築
  - リアルタイム双方向通信のためのWebSocketサポート
  - エンタープライズレディの認証とレート制限
  - インタラクティブな例を含む包括的なAPIドキュメント

- **💎 見事なインターフェースレイヤー**
  - あらゆるデバイスで完璧に動作する受賞に値するレスポンシブデザイン
  - ユーザー設定に基づくインテリジェントなダーク/ライトモード切り替え
  - エージェントの推論とツール実行のリアルタイム可視化
  - 自然言語処理を備えた音声対応インターフェース

## 🛠️ パワフルなツールアーセナル: 無限の可能性

AgentRadisには、AIで可能なことを変革する**息をのむようなツールコレクション**が搭載されています。各ツールは最大のパフォーマンスと信頼性のために細心の注意を払って作られており、超能力のような機能を提供します。

### 🔥 究極のファイル操作スイート
- **📁 FileTool**: 軍事グレードのセキュリティコントロールを備えた強力なファイル操作
- **📝 FileSaver**: 自動フォーマットとバージョン管理を備えた即時コンテンツ保存
- **🔍 FileSearch**: システム全体にわたる超高速ファイル検索
- **📊 FileStat**: 包括的なファイル分析と視覚化ツール

### 🌐 ウェブインテリジェンスセンター
- **🔎 WebSearch**: あらゆる可能性を探る多エンジン検索機能
- **🧠 WebExtract**: 意味理解を伴う高度なコンテンツ抽出
- **📸 WebCapture**: インタラクティブ要素を備えた高忠実度のウェブサイトキャプチャ
- **🔄 WebInteract**: 複雑なウェブタスクのための完全なブラウザ自動化

### 💻 コード実行パワーハウス
- **🐍 PythonTool**: 安全なサンドボックス環境内でPythonコードを実行
- **⚡ JavaScriptTool**: 完全なDOM対話機能を備えたJavaScriptの実行
- **📊 DataAnalysisTool**: 単一のコマンドで複雑なデータセットを処理・視覚化
- **🤖 AutomationTool**: 最小限のコードで洗練されたワークフローを作成

### 🗣️ 高度なコミュニケーションハブ
- **🎤 SpeechTool**: 最先端の音声認識と合成
- **🔊 AudioTool**: 包括的な音声処理と分析
- **📱 NotificationTool**: マルチチャネルアラートと通知
- **💬 ChatTool**: 複数のLLMプロバイダーと同時にやり取り

### 🧩 システム統合マスター
- **💻 Terminal**: 精度と安全性を備えたシステムコマンドの実行
- **🐧 Bash**: 豊富な出力解析を備えた複雑なbashスクリプトの実行
- **🔌 APITool**: 自動認証を備えた外部APIとの対話
- **📡 NetworkTool**: 包括的なネットワーク診断と管理

## 🚀 無限の拡張: 想像を超えて

AgentRadisは単なるツールではなく、絶えず進化し拡大するように設計された**生きて成長するエコシステム**です。革命的なアーキテクチャにより、想像できるあらゆる課題に対応するための無制限のカスタマイズと拡張が可能です。

### 🧩 数分で夢のツールを構築

```python
from app.tool.base import BaseTool

class MyCustomTool(BaseTool):
    name = "my_custom_tool"
    description = "ツールの機能の説明"
    parameters = {
        "type": "object",
        "properties": {
            "param1": {
                "type": "string",
                "description": "パラメータの説明"
            }
        },
        "required": ["param1"]
    }
    
    async def run(self, **kwargs) -> dict:
        # ツールのロジックを実装
        param1 = kwargs.get("param1")
        # パラメータを処理
        result = f"処理済み {param1}"
        return {
            "status": "success", 
            "result": result
        }
        
    async def cleanup(self):
        # リソースをクリーンアップ
        pass
```

### 🌟 自律的なツール発見と統合

AgentRadisは**革命的なMCP App Store統合**により、拡張を次のレベルに引き上げます。他のAIシステムとは異なり、AgentRadisは以下のことができます：

- **🧠 追加機能が必要な時を自律的に識別**し、MCP App Storeからリクエスト
- **🔍 タスクに基づいて新しいツールを動的に発見**し、人間の介入なしで対応
- **⚡ 新しいツールを数秒でインストールして統合**し、即座に利用可能に
- **👨‍💻 トレーニング不要で新しいツールの使用方法をその場で学習**
- **🔄 更新や依存関係を含むツールのライフサイクルを自動管理**

特殊なツールを必要とするタスクをAgentRadisに依頼するだけで、驚くべき動作を目の当たりにします：

```
ユーザー: "これらの顧客レビューの感情を分析できますか？"

AgentRadis: "顧客レビューの感情分析を行います。このタスクには特殊なツールをインストールする必要があります。"

[AgentRadisが自動的にMCP App Storeを検索]

AgentRadis: "MCP App StoreからSentimentAnalyzerツールを見つけてインストールしました。これから顧客レビューを分析します..."

[結果がすぐに表示される]
```

### 🔮 特化したタスク用のカスタムエージェント

直感的な拡張フレームワークを使用して、特定のドメインに合わせたエージェントを作成できます：

```python
from app.agent.toolcall import ToolCallAgent
from app.tool import ToolCollection, WebSearch, FileSaver

class ResearchAgent(ToolCallAgent):
    name = "ResearchAgent"
    description = "研究タスクに特化したエージェント"
    available_tools = ToolCollection(
        WebSearch(),
        FileSaver()
    )
    system_prompt = "あなたは正確な情報を見つけることに焦点を当てた研究アシスタントです。"
```

## 🗣️ 音声機能

AgentRadisには強力な音声認識と合成機能が含まれています：

### 音声認識
- リアルタイム音声テキスト変換
- 複数言語サポート
- 設定可能な感度と無音検出
- プライバシーのためのローカルモデルサポート

### 音声合成
- 高品質テキスト音声変換
- 複数の音声オプション（alloy、echo、fable、onyx、nova、shimmer）
- 速度とピッチの制御
- 高度な制御のためのSSMLサポート

使用例：
```python
from app.tool import SpeechTool

# 音声ツールを初期化
speech = SpeechTool()

# 音声を聞く
result = await speech.run(
    action="listen",
    timeout=10.0,
    language="ja"
)
print(f"聞き取り: {result['text']}")

# テキストを話す
await speech.run(
    action="speak",
    text="こんにちは、AgentRadisです！",
    voice="alloy"
)
```

## 🔍 ウェブ検索機能

AgentRadisには以下の機能を持つ強力なウェブ検索システムが含まれています：

- 複数の検索エンジン（Google、Bing、DuckDuckGo、Brave）をサポート
- 包括的なカバレッジのために結果を組み合わせる
- パフォーマンス向上のために結果をキャッシュ
- レート制限とエラーを優雅に処理
- より良い理解のためのコンテキスト関連スニペットを提供
- 利用可能な場合は構造化データを抽出
- 画像検索機能をサポート

使用例：
```python
from app.tool import WebSearch

# ウェブ検索ツールを初期化
search = WebSearch()

# 検索を実行
result = await search.run(
    query="AIの最新開発",
    engine="google",
    num_results=5
)

# 結果を処理
for item in result["results"]:
    print(f"タイトル: {item['title']}")
    print(f"URL: {item['url']}")
    print(f"スニペット: {item['snippet']}")
    print("---")
```

## 📝 文字列置換ツール

`StrReplaceEditor`ツールは強力なテキスト操作機能を提供します：

- 基本的な文字列置換
- 正規表現サポート
- ファイルコンテンツ操作
- 複数ファイルにわたるバッチ操作
- 確認のためのインタラクティブモード
- 元に戻す/やり直し機能

使用例：
```python
from app.tool import StrReplaceEditor

# 文字列置換ツールを初期化
editor = StrReplaceEditor()

# 単一ファイルで置換
result = await editor.run(
    action="replace",
    target_file="example.txt",
    pattern="こんにちは",
    replacement="世界",
    use_regex=False
)
print(f"置換回数: {result['count']}")

# 正規表現で置換
result = await editor.run(
    action="replace",
    target_file="code.py",
    pattern=r"def (\w+)\(",
    replacement=r"def renamed_\1(",
    use_regex=True
)
```

## 📊 パフォーマンスと制限

- **メモリ使用量**: 通常150-500MB RAM必要
- **ディスク容量**: コアインストールに約200MB、キャッシュデータ用に追加容量
- **APIレート制限**: 指数バックオフによるプロバイダーレート制限の尊重
- **ツール実行**: すべてのツールにタイムアウト保護（デフォルト30秒）
- **Python実行**: メモリと時間制限付きのサンドボックス
- **同時操作**: 複数の同時リクエストを処理
- **応答サイズ**: チャンキングとストリーミングによる大きな応答の管理

## 🔌 API統合

AgentRadisは他のアプリケーションとの統合のための包括的なAPIを提供します：

```python
import requests
import json

# 基本的なチャットリクエスト
response = requests.post(
    "http://localhost:5001/api/v1/chat",
    json={
        "prompt": "量子コンピューティングに関する情報を検索",
        "stream": False
    },
    headers={"Authorization": "Bearer your-api-key"}
)
result = response.json()

# ツール実行リクエスト
response = requests.post(
    "http://localhost:5001/api/v1/tool",
    json={
        "tool": "web_search",
        "params": {
            "query": "量子コンピューティングの進歩 2024",
            "engine": "google"
        }
    },
    headers={"Authorization": "Bearer your-api-key"}
)
search_result = response.json()

# ストリーミング応答
with requests.post(
    "http://localhost:5001/api/v1/chat",
    json={"prompt": "AIについての長いエッセイを書いて", "stream": True},
    headers={"Authorization": "Bearer your-api-key"},
    stream=True
) as response:
    for line in response.iter_lines():
        if line:
            chunk = json.loads(line.decode('utf-8'))
            print(chunk["content"], end="", flush=True)
```

## 🙏 謝辞

AgentRadisは以下の優れたプロジェクトからインスピレーションを得ています：

- [Langchain](https://github.com/langchain-ai/langchain) - LLMアプリケーションのためのフレームワーク
- [AutoGPT](https://github.com/Significant-Gravitas/AutoGPT) - 自律型GPT-4実験
- [AgentGPT](https://github.com/reworkd/AgentGPT) - ブラウザ内のAIエージェント

## 🚀 はじめに

### 📋 前提条件

- Python 3.9以降
- pipパッケージマネージャー
- Node.jsとnpm（MCPサーバーサポート用）

### 🛠️ インストール

2つのインストール方法を提供しています：

#### 方法1: condaを使用 🐍

1. 新しいconda環境を作成：

```bash
conda create -n agent_radis python=3.12
conda activate agent_radis
```

2. リポジトリをクローン：

```bash
git clone https://github.com/scooter-lacroix/AgentRadis.git
cd AgentRadis
```

3. 依存関係をインストール：

```bash
pip install -e .  # 編集可能モードでインストール
```

#### 方法2: venvを使用 🔄

1. リポジトリをクローン：

```bash
git clone https://github.com/scooter-lacroix/AgentRadis.git
cd AgentRadis
```

2. セットアップスクリプトを実行：

```bash
./run.sh
```

スクリプトは自動的に：
- 仮想環境が存在しない場合は作成
- 環境をアクティブ化
- すべての依存関係をインストール
- インタラクティブモードでAgentRadisを起動

### ⚙️ 設定

AgentRadisは、その動作をカスタマイズし、様々なLLMプロバイダーやツールと統合するための広範な設定オプションを提供します。システムはOpenAI、Anthropic、Azure、Ollama、LM Studioなど複数のLLMプロバイダーと連携するように設計されています。

1. `config`ディレクトリに`config.toml`ファイルを作成（例からコピー可能）：

```bash
cp config/config.example.toml config/config.toml
```

2. `config/config.toml`を編集してAPIキーを追加し、設定をカスタマイズ：

```toml
# グローバルLLM設定
[llm]
model = "gpt-4"                # メインLLMモデル
base_url = "https://api.openai.com/v1"  # APIエンドポイント
api_key = "sk-..."             # APIキー
max_tokens = 4096              # 最大応答長
temperature = 0.0              # 応答のランダム性（0.0-2.0）
timeout = 60                   # APIリクエストタイムアウト（秒）
retry_attempts = 3             # 失敗時の再試行回数
streaming = true               # ストリーミング応答を有効化

# ビジョンモデル設定
[llm.vision]
model = "gpt-4-vision-preview" # ビジョン対応モデル
base_url = "https://api.openai.com/v1"
api_key = "sk-..."             # メインAPIキーと異なる場合あり
max_tokens = 4096
detail_level = "high"          # 画像詳細レベル（low、medium、high）

# 代替LLMプロバイダー
[llm.providers.anthropic]
enabled = false
model = "claude-3-opus-20240229"
api_key = ""

[llm.providers.azure]
enabled = false
model = "gpt-4"
api_key = ""
endpoint = "https://your-endpoint.openai.azure.com/"
api_version = "2023-05-15"

[llm.providers.local]
enabled = false                # ローカルLLMサポート
model = "llama3"               # OllamaまたはSimilarのモデル名
endpoint = "http://localhost:11434/v1"

# MCPアプリストア設定
[mcp]
enabled = true                 # MCPアプリストアを有効化
server_url = "http://localhost:5004"
install_dir = "./mcp_apps"
auto_update = true             # MCPアプリを自動更新
verify_signatures = true       # セキュリティのためのアプリ署名検証

# 音声ツール設定
[speech]
enabled = true                 # 音声機能を有効化
stt_model = "tiny.en"          # 音声テキスト変換モデル（tiny.en、base.en、large）
stt_engine = "whisper"         # STTエンジン（whisper、faster_whisper）
tts_model = "tts-1"            # テキスト音声変換モデル
tts_voice = "alloy"            # 使用する音声（alloy、echo、fable、onyx、nova、shimmer）
auto_transcribe = false        # 音声入力を自動的に文字起こし
language = "ja"                # デフォルト言語
sample_rate = 16000            # 音声サンプルレート
silence_threshold = 0.1        # 無音検出しきい値
silence_duration = 1.0         # 録音終了の無音持続時間（秒）

# ウェブ検索設定
[web_search]
enabled = true                 # ウェブ検索を有効化
default_engine = "google"      # デフォルト検索エンジン
engines = ["google", "bing", "duckduckgo", "brave"]
cache_results = true           # 検索結果をキャッシュ
cache_ttl = 300                # キャッシュ期間（秒）
max_results = 10               # 検索あたりの最大結果数
timeout = 30                   # 検索タイムアウト（秒）
user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"

# ツール固有の設定
[tools]
allow_terminal = true          # ターミナルコマンドを許可
allow_python_exec = true       # Pythonコード実行を許可
allow_file_access = true       # ファイルシステムアクセスを許可
show_hidden_files = false      # ファイルリストで隠しファイルを表示
sudo_allowed = false           # sudoコマンドを許可（注意して使用）
max_file_size = 10485760       # 処理する最大ファイルサイズ（10MB）
restricted_paths = ["/etc", "/var"]  # アクセス制限されたパス
allowed_python_modules = ["os", "sys", "re", "json", "requests", "numpy", "pandas"] # Python実行で許可されたモジュール

# エージェント動作設定
[agent]
max_steps = 100                # 最大実行ステップ
memory_limit = 50              # メモリに保持するメッセージ数
tool_choice = "auto"           # ツール選択モード: auto、required、none
system_prompt = "あなたは様々なツールにアクセスできる役立つAIアシスタントです。"
default_agent = "radis"        # デフォルトエージェントタイプ（radis、toolcall、planning）
timeout = 300                  # エージェントセッションタイムアウト（秒）
verbose_logging = true         # 詳細なログ記録を有効化
keep_history = true            # 会話履歴を維持

# ウェブインターフェース設定
[web]
enabled = true                 # ウェブインターフェースを有効化
host = "0.0.0.0"               # バインドするホスト
port = 5000                    # リッスンするポート
debug = false                  # デバッグモードを有効化
require_auth = false           # 認証を要求
theme = "dark"                 # UIテーマ（dark、light）
max_upload_size = 52428800     # 最大アップロードサイズ（50MB）

# API設定
[api]
enabled = true                 # APIサーバーを有効化
host = "0.0.0.0"               # バインドするホスト
port = 5001                    # リッスンするポート
debug = false                  # デバッグモードを有効化
require_auth = true            # 認証を要求
rate_limit = 100               # 1分あたりのリクエスト数
cors_origins = ["http://localhost:3000", "https://yourapp.com"]

# ログ設定
[logging]
level = "INFO"                 # ログレベル（DEBUG、INFO、WARNING、ERROR）
log_file = "logs/agent.log"    # ログファイルの場所
max_size = 10485760            # 最大ログファイルサイズ（10MB）
backup_count = 5               # 保持するバックアップログの数
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
```

3. **環境変数サポート**: 設定ファイルの代わりに環境変数を使用することもできます：

```bash
export RADIS_LLM_API_KEY="sk-your-key-here"
export RADIS_LLM_MODEL="gpt-4"
export RADIS_SPEECH_TTS_VOICE="alloy"
```

4. **高度な設定**:
   - `config/tools.toml`: 利用可能なツールとその権限を設定
   - `config/prompts.toml`: 異なるエージェントモードのシステムプロンプトをカスタマイズ
   - `config/ui.toml`: ユーザーインターフェースの外観をカスタマイズ

## 🚀 クイックスタート

### 💻 コマンドラインオプション

`run.sh`スクリプトはAgentRadisと対話するための複数の方法を提供します：

```bash
# ヘルプと利用可能なオプションを表示
./run.sh --help

# ウェブインターフェースで起動（デフォルトポート5000）
./run.sh --web

# APIサーバーのみ起動
./run.sh --api

# 現在の設定を表示
./run.sh --config

# プロンプトを使用してフロー実行モードで実行
./run.sh --flow "ファイルを作成"

# プロンプトを直接処理
./run.sh "猫を検索"

# インタラクティブモード（引数なしの場合のデフォルト）
./run.sh
```

### 🌐 ウェブインターフェース

ウェブインターフェースを起動：

```bash
./run.sh --web
```

ブラウザで`http://localhost:5000`を開きます。ウェブインターフェースは以下を提供します：
- AgentRadisとのリアルタイム対話
- ツール実行の可視化
- コマンド履歴
- コンテキスト認識応答
- ファイルのアップロードとダウンロード
- 音声対話機能
- コードの構文強調表示

### 🔄 フローモード

フローモードは以下を可能にする特別な実行モードです：
- ステップバイステップのタスク実行
- より良いエラー処理
- 進捗追跡
- ツール状態管理

例：
```bash
./run.sh --flow "画像をダウンロードするPythonスクリプトを作成"
```

## 👨‍💻 作者

**Stanley Chisango** (@scooter-lacroix)
- 📧 メール: theslick.stan@gmail.com
- 🌐 GitHub: [scooter-lacroix](https://github.com/scooter-lacroix)

## 📄 ライセンス

このプロジェクトはMITライセンスの下でライセンスされています - 詳細は[LICENSE](LICENSE)ファイルをご覧ください。

## 🌟 スターをつけてください！

AgentRadisが役立つと思われる場合は、GitHubでスターをつけることをご検討ください！プロジェクトの成長と改善に役立ちます。

## 新機能

### 音声認識と合成

AgentRadis v2は、RealtimeSTTとRealtimeTTSライブラリの統合により、音声認識と合成機能を含むようになりました。これらの機能はMCP App Storeを通じて管理されます。

機能：
- 音声テキスト変換
- 異なる音声オプションによるテキスト音声変換
- コンテキスト認識会話
- 多段階音声対話

### MCP App Store

MCP App StoreはAgentRadis用のツールと機能を発見、インストール、管理するための集中的な方法を提供します。

機能：
- 利用可能なツールと機能を発見
- 必要に応じてツールをインストール/アンインストール
- 機能別にツールを分類
- 特定の機能を検索

## はじめに

### インストール

1. リポジトリをクローン：
```bash
git clone https://github.com/scooter-lacroix/AgentRadis_v2.git
cd AgentRadis_v2
```

2. 依存関係をインストール：
```bash
pip install -r requirements.txt
```

3. 音声ツールテストを実行：
```bash
python test_speech.py
```

### 音声ツールの使用

音声ツールはRadis APIまたはツール実行システムを通じて直接アクセスできます：

```python
from app.app import Radis

async def main():
    radis = Radis()
    
    # テキスト音声変換
    result = await radis.execute_tool("speech", 
        action="speak", 
        text="こんにちは、Radisです！"
    )
    
    # 音声テキスト変換
    result = await radis.execute_tool("speech",
        action="listen",
        options={"timeout": 5.0}
    )
    
    if result["status"] == "success":
        print(f"あなたの発言: {result['text']}")
```

## MCP App Store使用法

MCP App Storeは新しい機能を発見してインストールするために使用できます：

```python
from app.app import Radis

async def main():
    radis = Radis()
    
    # 利用可能なツールを取得
    tools = await radis.get_available_tools()
    
    # ツールを検索
    speech_tools = await radis.search_mcp_tools("speech")
    
    # ツールをインストール
    result = await radis.install_mcp_tool("realtimestt")
```
